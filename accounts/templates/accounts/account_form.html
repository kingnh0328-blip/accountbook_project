<!-- accounts/templates/accounts/account_form.html -->
{% extends 'base.html' %}

{% block title %}계좌 {% if object %}수정{% else %}생성{% endif %} - 33FinanceƐƐ{% endblock %}

{% block extra_css %}
<style>
    .form-card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 4px 24px rgba(0,0,0,0.08);
    }
    .form-header {
        background: linear-gradient(135deg, #0d6efd, #6610f2);
        color: white;
        border-radius: 16px 16px 0 0;
        padding: 2rem;
    }
    .form-header .icon {
        width: 64px;
        height: 64px;
        background: rgba(255,255,255,0.2);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }
    .form-control, .form-select {
        padding: 0.75rem 1rem;
        border-radius: 8px;
        border: 1px solid #dee2e6;
    }
    .form-control:focus, .form-select:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.15);
    }
    .input-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
    }
    .form-label {
        font-weight: 600;
        color: #344054;
        margin-bottom: 0.5rem;
    }
    .form-hint {
        font-size: 0.8rem;
        color: #6c757d;
        margin-top: 0.25rem;
    }
    .btn-submit {
        padding: 0.875rem 2rem;
        font-weight: 600;
        border-radius: 8px;
    }
    .required-mark {
        color: #dc3545;
        margin-left: 2px;
    }
</style>
{% endblock %}

{% block content %}
<!-- 뒤로가기 -->
<div class="mb-4">
    <a href="{% url 'accounts:account_list' %}" class="text-decoration-none text-muted">
        <i class="bi bi-arrow-left me-1"></i>계좌 목록으로 돌아가기
    </a>
</div>

<div class="row justify-content-center">
    <div class="col-lg-6 col-md-8">
        <div class="card form-card">
            <!-- 헤더 -->
            <div class="form-header text-center">
                <div class="icon mx-auto">
                    <i class="bi bi-{% if object %}pencil-square{% else %}bank{% endif %} fs-3"></i>
                </div>
                <h3 class="fw-bold mb-1">계좌 {% if object %}수정{% else %}생성{% endif %}</h3>
                <p class="mb-0 opacity-75">
                    {% if object %}계좌 정보를 수정합니다{% else %}새로운 계좌를 등록합니다{% endif %}
                </p>
            </div>

            <!-- 폼 -->
            <div class="card-body p-4">
                <form method="post">
                    {% csrf_token %}

                    <!-- 계좌명 -->
                    <div class="mb-4">
                        <label for="{{ form.name.id_for_label }}" class="form-label">
                            <i class="bi bi-tag me-1 text-primary"></i>계좌명
                            <span class="required-mark">*</span>
                        </label>
                        <input type="text"
                               name="name"
                               id="{{ form.name.id_for_label }}"
                               class="form-control {% if form.name.errors %}is-invalid{% endif %}"
                               value="{{ form.name.value|default:'' }}"
                               placeholder="예: 월급 통장, 생활비 계좌">
                        {% if form.name.errors %}
                            <div class="invalid-feedback">{{ form.name.errors.0 }}</div>
                        {% endif %}
                        <div class="form-hint">
                            <i class="bi bi-info-circle me-1"></i>{{ form.name.help_text }}
                        </div>
                    </div>

                    <!-- 은행명 -->
                    <div class="mb-4">
                        <label for="{{ form.bank_name.id_for_label }}" class="form-label">
                            <i class="bi bi-building me-1 text-primary"></i>은행명
                            <span class="required-mark">*</span>
                        </label>
                        <input type="text"
                               name="bank_name"
                               id="{{ form.bank_name.id_for_label }}"
                               class="form-control {% if form.bank_name.errors %}is-invalid{% endif %}"
                               value="{{ form.bank_name.value|default:'' }}"
                               placeholder="예: 신한은행, 국민은행">
                        {% if form.bank_name.errors %}
                            <div class="invalid-feedback">{{ form.bank_name.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <!-- 계좌번호 -->
                    <div class="mb-4">
                        <label for="{{ form.account_number.id_for_label }}" class="form-label">
                            <i class="bi bi-credit-card me-1 text-primary"></i>계좌번호
                            <span class="required-mark">*</span>
                        </label>
                        <input type="text"
                               name="account_number"
                               id="{{ form.account_number.id_for_label }}"
                               class="form-control {% if form.account_number.errors %}is-invalid{% endif %}"
                               value="{{ form.account_number.value|default:'' }}"
                               placeholder="예: 110-123-456789">
                        {% if form.account_number.errors %}
                            <div class="invalid-feedback">{{ form.account_number.errors.0 }}</div>
                        {% endif %}
                        <div class="form-hint">
                            <i class="bi bi-shield-check me-1"></i>{{ form.account_number.help_text }}
                        </div>
                    </div>

                    <!-- 초기 잔액 -->
                    <div class="mb-4">
                        <label for="{{ form.balance.id_for_label }}" class="form-label">
                            <i class="bi bi-currency-exchange me-1 text-primary"></i>{% if object %}현재 잔액{% else %}초기 잔액{% endif %}
                        </label>
                        <div class="input-group">
                            <input type="number"
                                   name="balance"
                                   id="{{ form.balance.id_for_label }}"
                                   class="form-control {% if form.balance.errors %}is-invalid{% endif %}"
                                   value="{{ form.balance.value|default:'0' }}"
                                   placeholder="0">
                            <span class="input-group-text">원</span>
                        </div>
                        {% if form.balance.errors %}
                            <div class="text-danger small mt-1">{{ form.balance.errors.0 }}</div>
                        {% endif %}
                        <div class="form-hint">
                            <i class="bi bi-info-circle me-1"></i>{{ form.balance.help_text }}
                        </div>
                    </div>

                    <!-- 버튼 -->
                    <div class="d-flex gap-3 pt-3">
                        <button type="submit" class="btn btn-primary btn-submit flex-grow-1">
                            <i class="bi bi-check-lg me-2"></i>{% if object %}수정 완료{% else %}계좌 생성{% endif %}
                        </button>
                        <a href="{% url 'accounts:account_list' %}" class="btn btn-outline-secondary btn-submit">
                            취소
                        </a>
                    </div>
                </form>
            </div>
        </div>

        <!-- 도움말 -->
        <div class="card border-0 bg-light mt-4">
            <div class="card-body">
                <h6 class="fw-bold mb-2">
                    <i class="bi bi-lightbulb text-warning me-2"></i>계좌 등록 팁
                </h6>
                <ul class="mb-0 text-muted small ps-3">
                    <li>실제 은행 계좌와 동일한 정보를 입력하면 관리가 편리합니다</li>
                    <li>계좌번호는 보안을 위해 일부만 표시됩니다</li>
                    <li>여러 계좌를 등록하면 자산을 한눈에 파악할 수 있습니다</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
